---

  - name: "install-general-packages: Update the apt package index"
    become: yes
    apt:
      name: "*"
      state: latest
      update_cache: yes
      force_apt_get: yes

  - name: "install-general-packages: install basic packages"
    become: yes
    apt:
      name: "{{ item }}"
      force_apt_get: yes
      update_cache: yes
      state: latest
    with_items:
      - software-properties-common
      - curl
      - sendmail
      - git
      - nethogs
      - nmap
      - openssh-server
      - net-tools
      - tree
      - default-jre
      - openjdk-11-jdk
      - bc
      - wget
      - unzip
      - vim         # Terminal sexy editor
      - sshpass
      - htop        # Human version of top
      - parted
      - net-tools
      - virtualbox  # Virtualization tool
      - debconf-utils
      - rclone  # for one-drive
      - keepass2
      - xdotool # to enable keepass autotype
      - openvpn
      - sysstat # to have sar and other tools | %ifutil: now gives the network interface utilization percentage https://github.com/sysstat/sysstat/blob/v12.5.4/CHANGES
      - stacer  # task manager graphical https://oguzhaninan.github.io/Stacer-Web/
      - vnstat # monitor network
      - grub-customizer # working on mint, is for grub graphical editing
      - flameshot # screen capture
      - konsole   # KDE Terminal
      - vagrant   # Virtualization
      - numlockx  # Turn on NumLock on startup in Linux Mint in the Login window
      - silversearcher-ag        #string search through a directory hierarchy - ag command 
      - tmux      #terminal multiplexer
      - graphviz  #to generate diagrams (dot command,etc...)
      - unrar     #to extract .rar files

  - name: "install-general-packages: configure debconf-utils for silent virtuabox-extensions installation"
    become: yes
    shell: "echo virtualbox-ext-pack virtualbox-ext-pack/license select true | debconf-set-selections"

  - name: "install-general-packages: install virtualbox-ext-pack"
    become: yes
    apt:
      name: "virtualbox-ext-pack"
      state: latest
    
  - name: "install-general-packages: configure numlock auto enable at startup"
    become: yes
    copy:
      content: "{{ numlock_config }}"
      dest: "/etc/lightdm/slick-greeter.conf" # https://unix.stackexchange.com/questions/275474/turn-on-numlock-on-startup-in-linux-mint-in-the-login-window#275475
    vars:
      numlock_config: |
        [Greeter]
        activate-numlock=true
